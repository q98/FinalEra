{"version":3,"file":"webXRGenericMotionController.js","sourceRoot":"","sources":["../../../../sourceES6/core/XR/motionController/webXRGenericMotionController.ts"],"names":[],"mappings":";AAAA,OAAO,EACH,6BAA6B,EAIhC,MAAM,iCAAiC,CAAC;AAGzC,OAAO,EAAE,IAAI,EAAE,MAAM,mBAAmB,CAAC;AACzC,OAAO,EAAE,UAAU,EAAE,MAAM,yBAAyB,CAAC;AAErD;;GAEG;AACH;IAAyD,uDAA6B;IAQlF,6CAAY,KAAY,EAAE,aAA6C,EAAE,QAAkC;QAA3G,YACI,kBAAM,KAAK,EAAE,oBAAoB,CAAC,QAAQ,CAAC,EAAE,aAAa,EAAE,QAAQ,CAAC,SACxE;QAJM,eAAS,GAAG,mCAAmC,CAAC,SAAS,CAAC;;IAIjE,CAAC;IAES,iEAAmB,GAA7B;QACI,OAAO;YACH,QAAQ,EAAE,iBAAiB;YAC3B,IAAI,EAAE,4CAA4C;SACrD,CAAC;IACN,CAAC;IAES,yEAA2B,GAArC;QACI,OAAO,IAAI,CAAC;IAChB,CAAC;IAES,iEAAmB,GAA7B,UAA8B,MAAsB;QAChD,gBAAgB;IACpB,CAAC;IAES,0DAAY,GAAtB,UAAuB,MAAsB;QAA7C,iBAWC;QAVG,IAAI,CAAC,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAE3E,MAAM,CAAC,OAAO,CAAC,UAAC,IAAI;YAChB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;gBACd,IAAI,CAAC,SAAS,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC;aACjC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,CAAC,kBAAkB,GAAG,UAAU,CAAC,eAAe,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;IACjF,CAAC;IAES,0DAAY,GAAtB;QACI,QAAQ;IACZ,CAAC;IAzCD;;OAEG;IACW,6CAAS,GAAG,iBAAiB,CAAC;IAuChD,0CAAC;CAAA,AA3CD,CAAyD,6BAA6B,GA2CrF;SA3CY,mCAAmC;AA6ChD,gJAAgJ;AAChJ,IAAM,oBAAoB,GAA+B;IACrD,MAAM,EAAE;QACJ,mBAAmB,EAAE,qBAAqB;QAC1C,YAAY,EAAE;YACV,qBAAqB,EAAE;gBACnB,MAAM,EAAE,SAAS;gBACjB,gBAAgB,EAAE;oBACd,QAAQ,EAAE,CAAC;iBACd;gBACD,cAAc,EAAE,qBAAqB;gBACrC,iBAAiB,EAAE,EAAE;aACxB;SACJ;QACD,gBAAgB,EAAE,aAAa;QAC/B,cAAc,EAAE,sBAAsB;QACtC,WAAW,EAAE,UAAU;KAC1B;IACD,OAAO,EAAE;QACL,mBAAmB,EAAE,qBAAqB;QAC1C,YAAY,EAAE;YACV,qBAAqB,EAAE;gBACnB,MAAM,EAAE,SAAS;gBACjB,gBAAgB,EAAE;oBACd,QAAQ,EAAE,CAAC;iBACd;gBACD,cAAc,EAAE,qBAAqB;gBACrC,iBAAiB,EAAE,EAAE;aACxB;SACJ;QACD,gBAAgB,EAAE,aAAa;QAC/B,cAAc,EAAE,uBAAuB;QACvC,WAAW,EAAE,WAAW;KAC3B;IACD,MAAM,EAAE;QACJ,mBAAmB,EAAE,qBAAqB;QAC1C,YAAY,EAAE;YACV,qBAAqB,EAAE;gBACnB,MAAM,EAAE,SAAS;gBACjB,gBAAgB,EAAE;oBACd,QAAQ,EAAE,CAAC;iBACd;gBACD,cAAc,EAAE,qBAAqB;gBACrC,iBAAiB,EAAE,EAAE;aACxB;SACJ;QACD,gBAAgB,EAAE,aAAa;QAC/B,cAAc,EAAE,sBAAsB;QACtC,WAAW,EAAE,UAAU;KAC1B;CACJ,CAAC","sourcesContent":["import {\r\n    WebXRAbstractMotionController,\r\n    IMinimalMotionControllerObject,\r\n    MotionControllerHandness,\r\n    IMotionControllerLayoutMap\r\n} from \"./webXRAbstractMotionController\";\r\nimport { AbstractMesh } from '../../Meshes/abstractMesh';\r\nimport { Scene } from '../../scene';\r\nimport { Mesh } from '../../Meshes/mesh';\r\nimport { Quaternion } from '../../Maths/math.vector';\r\n\r\n/**\r\n * A generic trigger-only motion controller for WebXR\r\n */\r\nexport class WebXRGenericTriggerMotionController extends WebXRAbstractMotionController {\r\n    /**\r\n     * Static version of the profile id of this controller\r\n     */\r\n    public static ProfileId = \"generic-trigger\";\r\n\r\n    public profileId = WebXRGenericTriggerMotionController.ProfileId;\r\n\r\n    constructor(scene: Scene, gamepadObject: IMinimalMotionControllerObject, handness: MotionControllerHandness) {\r\n        super(scene, GenericTriggerLayout[handness], gamepadObject, handness);\r\n    }\r\n\r\n    protected _getFilenameAndPath(): { filename: string; path: string; } {\r\n        return {\r\n            filename: \"generic.babylon\",\r\n            path: \"https://controllers.babylonjs.com/generic/\"\r\n        };\r\n    }\r\n\r\n    protected _getModelLoadingConstraints(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected _processLoadedModel(meshes: AbstractMesh[]): void {\r\n        // nothing to do\r\n    }\r\n\r\n    protected _setRootMesh(meshes: AbstractMesh[]): void {\r\n        this.rootMesh = new Mesh(this.profileId + \" \" + this.handness, this.scene);\r\n\r\n        meshes.forEach((mesh) => {\r\n            mesh.isPickable = false;\r\n            if (!mesh.parent) {\r\n                mesh.setParent(this.rootMesh);\r\n            }\r\n        });\r\n\r\n        this.rootMesh.rotationQuaternion = Quaternion.FromEulerAngles(0, Math.PI, 0);\r\n    }\r\n\r\n    protected _updateModel(): void {\r\n        // no-op\r\n    }\r\n}\r\n\r\n// https://github.com/immersive-web/webxr-input-profiles/blob/master/packages/registry/profiles/generic/generic-trigger-touchpad-thumbstick.json\r\nconst GenericTriggerLayout: IMotionControllerLayoutMap = {\r\n    \"left\": {\r\n        \"selectComponentId\": \"xr-standard-trigger\",\r\n        \"components\": {\r\n            \"xr-standard-trigger\": {\r\n                \"type\": \"trigger\",\r\n                \"gamepadIndices\": {\r\n                    \"button\": 0\r\n                },\r\n                \"rootNodeName\": \"xr_standard_trigger\",\r\n                \"visualResponses\": {}\r\n            }\r\n        },\r\n        \"gamepadMapping\": \"xr-standard\",\r\n        \"rootNodeName\": \"generic-trigger-left\",\r\n        \"assetPath\": \"left.glb\"\r\n    },\r\n    \"right\": {\r\n        \"selectComponentId\": \"xr-standard-trigger\",\r\n        \"components\": {\r\n            \"xr-standard-trigger\": {\r\n                \"type\": \"trigger\",\r\n                \"gamepadIndices\": {\r\n                    \"button\": 0\r\n                },\r\n                \"rootNodeName\": \"xr_standard_trigger\",\r\n                \"visualResponses\": {}\r\n            }\r\n        },\r\n        \"gamepadMapping\": \"xr-standard\",\r\n        \"rootNodeName\": \"generic-trigger-right\",\r\n        \"assetPath\": \"right.glb\"\r\n    },\r\n    \"none\": {\r\n        \"selectComponentId\": \"xr-standard-trigger\",\r\n        \"components\": {\r\n            \"xr-standard-trigger\": {\r\n                \"type\": \"trigger\",\r\n                \"gamepadIndices\": {\r\n                    \"button\": 0\r\n                },\r\n                \"rootNodeName\": \"xr_standard_trigger\",\r\n                \"visualResponses\": {}\r\n            }\r\n        },\r\n        \"gamepadMapping\": \"xr-standard\",\r\n        \"rootNodeName\": \"generic-trigger-none\",\r\n        \"assetPath\": \"none.glb\"\r\n    }\r\n};"]}